name: 'Check Links Run'
description: 'Runs htmltest and uploads the analysis artifact.'
inputs:
  run-number:
    description: 'The run number (e.g., 01, 02, ...).'
    required: true
  working-directory:
    description: 'Directory to run htmltest in.'
    required: false
    default: 'scripts/htmltest'
  config-file:
    description: 'htmltest config file path.'
    required: false
    default: './htmltest_bonita-documentation-site.yml'
  site-path:
    description: 'Path to the built site.'
    required: false
    default: '../../build/site'
runs:
  using: 'composite'
  steps:
    - name: Run htmltest
      shell: bash
      working-directory: ${{ inputs.working-directory }}
      continue-on-error: true
      run: |
        ./htmltest -c ${{ inputs.config-file }} ${{ inputs.site-path }}
    - name: Upload links analysis
      uses: actions/upload-artifact@v4
      with:
        name: check-links-analysis-run_${{ inputs.run-number }}-${{ github.sha }}
        path: ${{ inputs.working-directory }}/config
